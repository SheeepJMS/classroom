# Render数据库调试工具 - 快速使用指南

## 🚀 快速开始

### Windows用户
```cmd
# 方法1: 使用批处理文件
start_render_debug.bat

# 方法2: 使用Python启动器
python start_render_debug.py
```

### Linux/Mac用户
```bash
# 方法1: 使用Shell脚本
./start_render_debug.sh

# 方法2: 使用Python启动器
python3 start_render_debug.py
```

## 📋 使用步骤

### 1. 设置环境变量
```bash
# Windows
set DATABASE_URL=postgresql://user:pass@host:port/dbname

# Linux/Mac
export DATABASE_URL='postgresql://user:pass@host:port/dbname'
```

### 2. 运行调试工具
选择以下任一方式：

#### 方式A: Web调试界面（推荐）
- 启动后访问 `http://localhost:5000`
- 点击各种调试按钮进行诊断
- 实时查看数据库状态

#### 方式B: 命令行工具
```bash
# 检查数据库状态
python fix_render_database.py --check

# 修复数据库问题
python fix_render_database.py --fix

# 检查并修复
python fix_render_database.py
```

## 🔧 常见问题解决

### 问题1: 数据库连接失败
**症状**: 无法连接到PostgreSQL数据库
**解决**:
1. 检查`DATABASE_URL`是否正确
2. 确认数据库服务正在运行
3. 验证网络连接

### 问题2: 表不存在
**症状**: 提示表不存在的错误
**解决**:
1. 运行数据库修复工具
2. 检查模型定义是否正确
3. 手动创建缺失的表

### 问题3: 字段缺失
**症状**: 提示字段不存在的错误
**解决**:
1. 使用Web调试界面检查表结构
2. 运行自动修复功能
3. 手动添加缺失字段

## 📊 调试功能说明

### Web调试界面功能
- **测试连接**: 验证数据库连接
- **检查表结构**: 查看所有表的结构
- **检查数据**: 查看各表的数据内容
- **测试操作**: 验证数据库操作
- **修复数据库**: 自动修复常见问题
- **检查环境**: 查看环境变量和系统信息

### 命令行工具功能
- **状态检查**: 检查数据库整体状态
- **结构验证**: 验证表结构完整性
- **数据修复**: 修复数据不一致问题
- **字段添加**: 添加缺失的字段

## 🎯 使用建议

### 1. 首次使用
1. 先运行"检查环境"确认配置正确
2. 使用"测试连接"验证数据库连接
3. 运行"检查表结构"确认表是否存在

### 2. 问题诊断
1. 查看调试日志了解具体错误
2. 使用Web界面实时监控状态
3. 逐步排查连接、结构、数据问题

### 3. 定期维护
1. 定期运行健康检查
2. 监控数据库性能
3. 及时修复发现的问题

## 📞 获取帮助

如果遇到问题：
1. 查看调试日志文件
2. 使用Web界面的"检查环境"功能
3. 运行命令行工具的检查模式
4. 提供详细的错误信息

## 🔄 更新日志

- **v1.0**: 基础调试功能
- **v1.1**: 添加Web界面
- **v1.2**: 支持Windows环境
- **v1.3**: 增强错误诊断
